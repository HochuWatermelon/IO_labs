# Лабораторная работа 2

**Название:** "Разработка драйверов блочных устройств"

**Цель работы:** Получить знания и навыки разработки драйверов блочных устройств для операционной системы Linux.

## Описание функциональности драйвера

Драйвер создаёт виртуальный жёсткий диск в оперативной памяти размером 50 Мбайт и разбивает его на 1 первичный раздел размером 20Мбайт и 1 расширенный раздел, содержащий три логических раздела размером 10Мбайт. При этом каждый записываемый байт является арифметическим средним от трех предыдущих.

## Инструкция по сборке
Очистка:
make clean 
Сборка модуля:
make
sudo insmod bl_drv.ko - загружает модуль в ядро.
sudo rmmod bl_drv - выгружает модуль из ядра.

## Инструкция пользователя

Вывести информацию о таблице разделов vramdisk:
sudo fdisk -l /dev/vramdisk

Создадим файловую систему:
sudo mkfs.vfat /dev/vramdisk1
sudo mkfs.vfat /dev/vramdisk5 

Создание точек монтирования
sudo mkdir /mnt/disk1
sudo mkdir /mnt/disk5

Монтирование дисков:
sudo mount -t vfat /dev/vramdisk1 /mnt/disk1
sudo mount -t vfat /dev/vramdisk5 /mnt/disk5

## Примеры использования
Выделите место для файла на диске 1 и 5
sudo fallocate -l 7M /mnt/disk1/file 
sudo fallocate -l 7M /mnt/disk5/filecopy

 
Проверим:
- скорость передачи данных при копировании файлов между разделами созданного виртуального диска

sudo bash -c 'pv /mnt/disk1/file > /mnt/disk5/filecopy'

7,00MiB 0:00:00 [ 443MiB/s] [================================>] 100%

- скорость передачи данных при копировании файлов между разделами виртуального и реального жестких дисков

sudo bash -c 'pv /mnt/disk1/file > /home/excel/Desktop/testfile'

7,00MiB 0:00:00 [1,13GiB/s] [================================>] 100%

sudo fdisk -l /dev/vramdisk

![alt text](https://github.com/HochuWatermelon/IO_labs/blob/master/lab2/lab2_work.jpg)
